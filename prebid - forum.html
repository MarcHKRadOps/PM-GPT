<html>
    <head>
        <script async src="https://www.googletagservices.com/tag/js/gpt.js"></script>
        <script async src="//prebid2.15.0.js"></script>
        <script type='text/javascript' src='https://www.practicalmachinist.com/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'>
        <script>
            var desktopSizes = [
                [970, 250],
                [970,90],
                [728,90],
                [300, 600],
                [300,250],
                [160,600],
                [120, 600]
            ];
            var phoneSizes = [
                [320, 100],
                [320, 50],
                [300, 250]
            ];
            var allSizes = [
                [970, 250],
                [970,90],
                [728,90],
                [320, 100],
                [320, 50],
                [300, 600],
                [300, 250],
                [160,600],
                [120,600]
            ];
            var PREBID_TIMEOUT = 1000;
            var FAILSAFE_TIMEOUT = 3000;

            var adUnits = [
                {
                    code: 'div-gpt-ad-Header',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId:
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forum_TopRectangle',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder: ,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forum_HalfPage',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder: ,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Footer',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forums_1',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forums_2',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forums_3',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId: 
                        }
                    }]
                },
                {
                    code: 'div-gpt-ad-Forums_4',
                    mediaTypes: {
                        banner: {
                            sizes: allSizes
                        }
                    },
                    bids: [{
                        bidder:,
                        params: {
                            placementId: 
                        }
                    }]
                }
            ];

            const customPriceMap = {
                "buckets" : [{
                    "min" : 0,
                    "max" : 5,
                    "increment" : 0.01
                },
                {
                    "min" : 5,
                    "max" : 10,
                    "increment" : 0.05
                },
                {
                    "min" : 10,
                    "max" : 20,
                    "increment" : 0.1
                },
                {
                    "min" : 20,
                    "max" : 50,
                    "increment" : 0.5
                },
                {
                    "min" : 50,
                    "max" : 99,
                    "increment" : 1.0
                }]
            };

            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                googletag.pubads().disableInitialLoad();
            });

            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            pbjs.que.push(function() {
                pbjs.addAdUnits(adUnits);
                pbjs.setConfig({
                    priceGranularity: customPriceMap
                },
                {
                    sizeConfig: [{
                        'mediaQuery': '(min-width: 768px)',
                        'sizesSupported': desktopSizes,
                        'labels': ['desktop']
                    }, {
                        'mediaQuery': '(min-width: 0px) and (max-width: 767px)',
                        'sizesSupported': phoneSizes,
                        'labels': ['mobile']
                    }]
                });
                pbjs.requestBids({
                    bidsBackHandler: sendAdserverRequest,
                    timeout: PREBID_TIMEOUT
                });
            });

            function initAdserver() {
                if (pbjs.initAdserverSet) return;
                pbjs.initAdserverSet = true;
                googletag.cmd.push(function() {
                    pbjs.setTargetingForGPTAsync && pbjs.setTargetingForGPTAsync();
                    googletag.pubads().refresh();
                });
            }
            
            setTimeout(function() {
                initAdserver();
            }, FAILSAFE_TIMEOUT);

            googletag.cmd.push(function() {
                var mapLeaTop = googletag.sizeMapping().
                    addSize([0, 0], [[320, 50],[320,100],[300,250]]).
                    addSize([768, 0], [[970, 250],[970,90],[728,90]]).
                    build();
                var mapRec = googletag.sizeMapping().
                    addSize([0, 0], [[320, 50],[320,100],[300,250]]).
                    addSize([768, 0], [[300, 250],[300,600],[160,600],[120,600]]).
                    build();
                var mapLeaForum = googletag.sizeMapping().
                    addSize([0, 0], [[320, 50],[320,100],[300,250]]).
                    addSize([768], [[728,90]]).
                    addSize([1320], [[970,90],[728,90]]).
                    build();
                googletag.defineSlot('/1055375/Header', [728, 90], 'div-gpt-ad-1428522563879-5').setTargeting('loc', 'top').defineSizeMapping(mapLeaTop).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forums_1_728x90', [728, 90], 'div-gpt-ad-1428522563879-14').setTargeting('loc', 'mid').defineSizeMapping(mapLeaForum).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forums_2_728x90', [728, 90], 'div-gpt-ad-1428522563879-11').setTargeting('loc', 'mid').defineSizeMapping(mapLeaForum).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forums_3_728x90', [728, 90], 'div-gpt-ad-1428522563879-21').setTargeting('loc', 'mid').defineSizeMapping(mapLeaForum).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forums_4_728x90', [728, 90], 'div-gpt-ad-1428522563879-9').setTargeting('loc', 'mid').defineSizeMapping(mapLeaForum).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forum_TopRectangle', [[300, 600],[300,250]], 'div-gpt-ad-1428522563879-18').setTargeting('loc', 'top').defineSizeMapping(mapRec).defineSizeMapping(mapRec).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forum_HalfPage', [[300, 600],[300,250]], 'div-gpt-ad-half-page').setTargeting('loc', 'top').defineSizeMapping(mapRec).defineSizeMapping(mapRec).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Footer', [728, 90], 'div-gpt-ad-1428522563879-10').setTargeting('loc', 'bot').defineSizeMapping(mapLeaForum).addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forum_NativeAd', ['fluid'], 'div-gpt-ad-native-ad').addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forum_NativeAd2', ['fluid'], 'div-gpt-ad-native-ad-2').addService(googletag.pubads());
                googletag.defineSlot('/1055375/Forum_NativeAd3', ['fluid'], 'div-gpt-ad-native-ad-3').addService(googletag.pubads()); 
                googletag.pubads().enableSingleRequest();
                //googletag.pubads().collapseEmptyDivs(true);
                googletag.pubads().setTargeting('wordpress', '');
                googletag.pubads().setTargeting('keywords', ['']);
                googletag.pubads().setTargeting('script', '');
                googletag.pubads().setTargeting('usergroup', '');
                googletag.enableServices();
            });

        </script>

    </head>

    <body>
        <h2>Basic Prebid.js Example</h2>
        <h5>div-gpt-ad-Header</h5>
        <div id='div-gpt-ad-Header'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('div-gpt-ad-Header');
                });
            </script>
        </div>        
        <h5>Div-2</h5>
        <div id='div-gpt-ad-HP-Half-Page'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('div-gpt-ad-HP-Half-Page');
                });
            </script>
        </div>
        <h5>Div-2</h5>
        <div id='div-gpt-ad-Footer'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('div-gpt-ad-Footer');
                });
            </script>
        </div>
    </body>
</html>